#!/bin/bash

LOG_FILE="Build.log"
MAVEN_COMMAND="./mvnw clean package -DskipTests"

echo > $LOG_FILE
echo "\n\n*********************************************************************************************************" >> ../$LOG_FILE
echo "********************************[ Building infrasight-discovery-service ]********************************" >> ../$LOG_FILE
echo "*********************************************************************************************************" >> ../$LOG_FILE
cd infrasight-discovery-service && $MAVEN_COMMAND  >> ../$LOG_FILE

echo "\n\n*********************************************************************************************************" >> ../$LOG_FILE
echo "********************************[ Building infrasight-auth-service ]*********************************" >> ../$LOG_FILE
echo "**********************************************************************************************************" >> ../$LOG_FILE
cd ../infrasight-auth-service && $MAVEN_COMMAND >> ../$LOG_FILE

echo "\n\n*********************************************************************************************************" >> ../$LOG_FILE
echo "********************************[ Building infrasight-presentation-service ]*********************************" >> ../$LOG_FILE
echo "**********************************************************************************************************" >> ../$LOG_FILE
cd ../infrasight-presentation-service && $MAVEN_COMMAND >> ../$LOG_FILE

echo "\n\n*********************************************************************************************************" >> ../$LOG_FILE
echo "********************************[ Building infrasight-stats-capture-service ]*********************************" >> ../$LOG_FILE
echo "**********************************************************************************************************" >> ../$LOG_FILE
cd ../infrasight-stats-capture-service && $MAVEN_COMMAND >> ../$LOG_FILE

echo "\n\n*********************************************************************************************************" >> ../$LOG_FILE
echo "********************************[ Building infrasight-prophet-service ]*********************************" >> ../$LOG_FILE
echo "**********************************************************************************************************" >> ../$LOG_FILE
cd ../infrasight-prophet-service && $MAVEN_COMMAND >> ../$LOG_FILE

echo "\n\n*********************************************************************************************************" >> ../$LOG_FILE
echo "********************************[ Building infrasight-server-service ]*********************************" >> ../$LOG_FILE
echo "**********************************************************************************************************" >> ../$LOG_FILE
cd ../infrasight-server-service && $MAVEN_COMMAND >> ../$LOG_FILE

echo "\n\n*********************************************************************************************************" >> ../$LOG_FILE
echo "********************************[ Building infrasight-gatewsy-service ]*********************************" >> ../$LOG_FILE
echo "**********************************************************************************************************" >> ../$LOG_FILE
cd ../infrasight-gatewsy-service && $MAVEN_COMMAND >> ../$LOG_FILE
